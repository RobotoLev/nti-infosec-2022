# CODER SQUAD
--------------------------------------------
### Сегмент DMZ

Сканирование сегмента сети DMZ выявило рабочие хосты на адресах .10, .11, .12, .53. Первый из них – Linux, второй и третий – Windows (dmz.jpg).
На первом хосте открыты 4 порта: 22 ssh, 80 и 8080 http-сервера, 3306 mysql.

Linux host по адресу .10:


На 80 порту обнаруживается простой сайт на Wordpress с стандартным доступом admin/admin. 
Сразу меняем пароль на более сложный `E1Jsw0)*(8dx` . В админке уже установлен плагин для просмотра файлов, задаем ему корневую папку в / и получаем доступ ко всей файловой системе от имени www-data. Загружаем веб-шелл, получаем доступ к командной строке от имени www-data.
При анализе логов nginx и uwsgi находим Flask-приложение в /home/user/SolarApp_back/ и его бекап в /home/cadm/SolarApp_back/. 
Бекап readonly, у user-а имеем write-права. 
Приложение не работает, т.к. не имеет доступа к базе: в коде прописан доступ root/root, вероятно злоумышленник изменил доступы в базе. Был восстановлен бекап базы данных из файла сохранения. Приложение было запущено на порту 5049, легитимный доступ восстановлен.
В процессе аудита системы через lastlog были обнаружены входы на аккаунты cadm и admin с айпи адресов злоумышленника: 192.168.224.43 и 192.168.224.254. (lastlog.png)

~~В процессе работы был случайно удален сокет /home/user/SolarApp_back/solar.sock, связывающий uwsgi и nginx у оригинального приложения. Восстановите, пожалуйста, исходное состояние сервиса, если это требуется для дальнейшего решения задачи.~~


Windows машина по адресу .12:

Отсканировав айпишник 10.12.2.12 nmap'ом, мы нашли уязвимость CVE-2017-0143. С помощью нескольких команд, мы зашли в виндовс под пользователя. Нашли странную программу SLmail.exe.
В папке Program Files (x86) нашли 2 директории SLmail и SLadmin. Есть предположения, что нужно реверсить как само приложение SLmail, так и файлы в архиве, которые хранятся в директории Sladmin.






